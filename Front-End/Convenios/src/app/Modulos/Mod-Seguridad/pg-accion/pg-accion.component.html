
<div class="card">
  <p-toolbar styleClass="p-mb-4">
      <ng-template pTemplate="left">
          <strong>  Administración de Acciones</strong>
       </ng-template>
      <ng-template pTemplate="right">
          <button pButton pRipple label="Nuevo" icon="pi pi-pencil" class="p-button mr-2" pTooltip="Crear nueva acción" (click)="nuevaAccion()"></button>
          <span class="p-input-icon-right">
               <i class="pi pi-search"></i>
              <input pInputText type="text" (input)="dt.filterGlobal($any($event.target).value, 'contains')" placeholder="Buscar..." />
          </span>


      </ng-template>

  </p-toolbar>

  <p-table #dt [value]="accion" [rows]="10" [paginator]="true" [globalFilterFields]="['strtitulo','strurl','strseudonimo']"
           styleClass="p-datatable-gridlines p-datatable-sm" [rowHover]="true" dataKey="id" [rowsPerPageOptions]="[10,25,50]" responsiveLayout="scroll" [responsive]="true"
           currentPageReportTemplate="Mostrando {first} hasta {last} de {totalRecords} registros" [showCurrentPageReport]="true">

      <ng-template pTemplate="header">
          <tr>

              <th pSortableColumn="intid" style="width:1%">ID <p-sortIcon field="code"></p-sortIcon></th>
              <th pSortableColumn="strtitulo" style="width:20%">Título <p-sortIcon field="text"></p-sortIcon></th>
              <th pSortableColumn="strdescripcion" style="width:20%">Descripción <p-sortIcon field="text"></p-sortIcon></th>
              <th pSortableColumn="strurl" style="width:20%">Dirección <p-sortIcon field="text"></p-sortIcon></th>
              <th pSortableColumn="blnactivo" style="width:20%">Activo <p-sortIcon field=""></p-sortIcon></th>
              <th pSortableColumn="strseudonimo" style="width:20%">Seudónimo <p-sortIcon field="text"></p-sortIcon></th>

              <th class="text-center">Acción</th>

          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
          <tr>


                  <td style="width: 1%;">{{ item.intid }}</td>
                  <td style="width: 33%;">{{ item.strtitulo }}</td>
                  <td style="width: 33%;">{{ item.strdescripcion }}</td>
                  <td style="width: 33%;">{{ item.strurl }}</td>
                  <td style="width: 33%;">{{ item.blnactivo }}</td>
                  <td style="width: 33%;">{{ item.strseudonimo }}</td>

              <td style="width: 1%;">
                <div style="display: flex;">
                  <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded mr-2"  (click)="editAccion(item)"  ></button>
                  <button pButton pRipple icon="pi pi-trash" class="p-button-rounded mr-2 btn-rojo" pTooltip="Eliminar"></button>
                </div>



              </td>
          </tr>
      </ng-template>
      <ng-template pTemplate="summary">
          <div class="p-d-flex p-ai-center p-jc-between">
            <!-- In total there are {{products ? products.length : 0 }} products.-->
          </div>

      </ng-template>
  </p-table>
  <br><br>
</div>


<p-toast></p-toast>
<p-dialog [(visible)]="nuevoModal" header="{{titulo}}" [modal]="true" styleClass="p-fluid"  [style]="{width: '450px'}" [contentStyle]="{ 'height': '400px' }" >
<ng-template pTemplate="content">

  <div class="p-field">

    <div class="p-field"  *ngIf="visible">
      <label for="codigo">ID</label>
      <input  type="text"  class="form-control" pInputText id="intid" required name=""  readonly [(ngModel)]="txtid" />

    </div><br>

    <div class="p-field">
      <label for="codigo">Título</label>
      <input type="text"  class="form-control" pInputText id="strcodigo" required name="" [(ngModel)]="txtTitulo" />
      <small class="p-invalid"  *ngIf="submitted && !txtTitulo">Título Necesario</small>

    </div><br>

    <div class="p-field">
      <label for="codigo">Descripción</label>
      <input type="text"  class="form-control" pInputText id="strdescripcion" required name="" [(ngModel)]="txtDescripcion"  />
      <small class="p-invalid"  *ngIf="submitted && !txtDescripcion">Descripción Necesaria</small>

    </div><br>

    <div class="p-field">
      <label for="codigo">URL</label>
      <input type="text"  class="form-control" pInputText id="strurl" required name="" [(ngModel)]="txtUrl"  />
      <small class="p-invalid"  *ngIf="submitted && !txtUrl"> URL Necesario</small>

    </div><br>

    <div class="p-field">
      <label for="codigo">Activo: </label>
      <input type="checkbox" id="investigacion"  [(ngModel)]="blnActivo" >
      <small class="p-invalid"  *ngIf="submitted && !blnActivo"> Estado Necesario</small>

    </div><br>

    <div class="p-field">
      <label for="codigo">Seudónimo</label>
      <input type="text" class="form-control" pInputText id="strseudonimo" required name="" [(ngModel)]="txtSeudonimo"  />
      <small class="p-invalid"  *ngIf="submitted && !txtSeudonimo">Seudónimo Necesario</small>

    </div><br>

  </div><br>


</ng-template>
<ng-template pTemplate="footer">
  <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text"  (click)="nuevoModal=false"></button>
  <button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-text" (click)="guardarAccion()" ></button>

</ng-template>

</p-dialog>





