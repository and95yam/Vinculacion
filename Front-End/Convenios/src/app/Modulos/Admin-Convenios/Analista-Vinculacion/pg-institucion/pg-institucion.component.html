<div class="card">
  <p-toolbar styleClass="p-mb-4">
      <ng-template pTemplate="left">
          <strong> INSTITUCIONES</strong>
       </ng-template>
      <ng-template pTemplate="right">
          <button pButton pRipple label="Nuevo" icon="pi pi-pencil" class="p-button mr-2" pTooltip="Agregar Institución" (click)="nuevaInstitucion()"></button>
          <span class="p-input-icon-right">
               <i class="pi pi-search"></i>
              <input pInputText type="text" (input)="dt.filterGlobal($any($event.target).value, 'contains')" placeholder="Buscar..." />
          </span>


      </ng-template>

  </p-toolbar>

  <p-table #dt [value]="institucion" [rows]="10" [paginator]="true" [globalFilterFields]="['strinstitucion']"
           styleClass="p-datatable-gridlines p-datatable-sm" [rowHover]="true" dataKey="id" [rowsPerPageOptions]="[10,25,50]" responsiveLayout="scroll" [responsive]="true"
           currentPageReportTemplate="Mostrando {first} hasta {last} de {totalRecords} registros" [showCurrentPageReport]="true">

      <ng-template pTemplate="header">
          <tr>

              <th pSortableColumn="intidinstitucion">ID <p-sortIcon field="code"></p-sortIcon></th>
              <th pSortableColumn="strinstitucion" style="width:20%">Nombre Institución <p-sortIcon field="name"></p-sortIcon></th>


              <th class="text-center">Acción</th>

          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
          <tr>


                  <td style="width: 1%;">{{ item.intidinstitucion }}</td>
                  <td>{{ item.strinstitucion }}</td>

              <td style="width: 1%;">
                  <button pButton pRipple icon="pi pi-pencil" class="p-button-rounded mr-2" (click)=" editarInstitucion(item)" ></button>


              </td>
          </tr>
      </ng-template>
      <ng-template pTemplate="summary">
          <div class="p-d-flex p-ai-center p-jc-between">
            <!-- In total there are {{products ? products.length : 0 }} products.-->
          </div>

      </ng-template>
  </p-table>
  <br><br>
</div>

<p-toast></p-toast>
<p-dialog [(visible)]="nuevoModal" header="{{titulo}}" [modal]="true" styleClass="p-fluid"  [style]="{width: '650px'}" [contentStyle]="{ 'height': '170px' }" >
  <ng-template pTemplate="content">

    <div class="p-field">
      <label for="codigo">Código</label>
      <input type="text"  class="form-control" pInputText id="intidinstitucion" readonly required name="" [(ngModel)]="txtCodigoInstitucion"  />
    </div><br>

    <div class="p-field" >
      <label for="name">Nombre Institución</label>
      <input  [ngClass]="{'error': submitted && !txtInstitucion}" type="text" pInputText id="strinstitucion" [(ngModel)]="txtInstitucion" required autofocus  maxlength="256"/>
      <small class="p-invalid"  *ngIf="submitted && !txtInstitucion">Institución Necesaria</small>
    </div><br>


  </ng-template>
  <ng-template pTemplate="footer">
    <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text"  (click)="nuevoModal=false"></button>
    <button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-text" (click)="GuardarInstitucion()"  ></button>

  </ng-template>

</p-dialog>
